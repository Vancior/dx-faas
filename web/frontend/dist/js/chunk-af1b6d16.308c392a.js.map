{"version":3,"sources":["webpack:///./src/components/WorkflowCreate.vue?0a50","webpack:///./src/components/WorkflowCreate.vue?5fe4","webpack:///src/components/WorkflowCreate.vue","webpack:///./src/components/WorkflowCreate.vue?0c9e","webpack:///./src/components/WorkflowCreate.vue?847d"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WorkflowCreate_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WorkflowCreate_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticStyle","height","width","margin","background","padding","attrs","size","shape","type","icon","on","click","$event","$router","replace","_v","submit","label-position","label-width","rules","rulesValidate","model","form","label","prop","span","value","callback","$$v","$set","expression","position","left","id","list-style","max-height","overflow-y","_l","f","idx","key","border-top","style","functionLastOne","_s","name","uri","content","placement","color","cursor","copyToClipboard","ref","font-size","lang","theme","init","aceInit","_n","slot","staticRenderFns","WorkflowCreatevue_type_script_lang_js_","components","AceEditor","data","workflowName","workflowURI","definition","maxIdleTime","functionList","required","message","pattern","validator","rule","vue_runtime_esm","axios","post","then","rep","status","Error","info","catch","err","trigger","mounted","_this","get","statusText","console","error","methods","editor","$refs","workflowEditor","updatePreview","_this2","max_idle_time","$Message","success","push","log","svg","d3","inner","select","vis","workflow_vis","workflow","JSON","parse","dag","toDAG","clear","setNodes","nodes","setEdges","edges","setStartNodes","startNodes","setEndNodes","endNodes","setParents","parents","redraw","node","document","querySelector","execCommand","computed","Object","keys","length","components_WorkflowCreatevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"2IAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAkdE,EAAG,4CCArd,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,UAAoBE,YAAA,CAAaC,OAAA,OAAAC,MAAA,MAAAC,OAAA,WAAiD,CAAAL,EAAA,UAAeE,YAAA,CAAaI,WAAA,cAAAC,QAAA,MAA0C,CAAAP,EAAA,UAAeQ,MAAA,CAAOC,KAAA,QAAAC,MAAA,SAAAC,KAAA,UAAAC,KAAA,uBAA8EC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAnB,EAAAoB,QAAAC,QAAA,wBAAiDrB,EAAAsB,GAAA,WAAAlB,EAAA,UAAiCQ,MAAA,CAAOC,KAAA,QAAAC,MAAA,SAAAC,KAAA,WAAiDE,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAnB,EAAAuB,YAAsB,CAAAvB,EAAAsB,GAAA,YAAAlB,EAAA,UAAkCE,YAAA,CAAaC,OAAA,OAAAG,WAAA,OAAAC,QAAA,qBAAkE,CAAAP,EAAA,QAAaQ,MAAA,CAAOY,iBAAA,OAAAC,cAAA,IAAAC,MAAA1B,EAAA2B,cAAAC,MAAA5B,EAAA6B,OAAsF,CAAAzB,EAAA,YAAiBQ,MAAA,CAAOkB,MAAA,QAAAC,KAAA,iBAAuC,CAAA3B,EAAA,OAAAA,EAAA,OAAsBQ,MAAA,CAAOoB,KAAA,OAAa,CAAA5B,EAAA,SAAcwB,MAAA,CAAOK,MAAAjC,EAAA6B,KAAA,aAAAK,SAAA,SAAAC,GAAuDnC,EAAAoC,KAAApC,EAAA6B,KAAA,eAAAM,IAAwCE,WAAA,wBAAiC,WAAAjC,EAAA,YAA6BQ,MAAA,CAAOkB,MAAA,MAAAC,KAAA,gBAAoC,CAAA3B,EAAA,OAAAA,EAAA,OAAsBQ,MAAA,CAAOoB,KAAA,OAAa,CAAA5B,EAAA,SAAcwB,MAAA,CAAOK,MAAAjC,EAAA6B,KAAA,YAAAK,SAAA,SAAAC,GAAsDnC,EAAAoC,KAAApC,EAAA6B,KAAA,cAAAM,IAAuCE,WAAA,uBAAgC,WAAAjC,EAAA,YAA6BQ,MAAA,CAAOkB,MAAA,WAAkB,CAAA1B,EAAA,OAAAA,EAAA,OAAsBQ,MAAA,CAAOoB,KAAA,OAAa,CAAA5B,EAAA,SAAcE,YAAA,CAAagC,SAAA,WAAAC,KAAA,UAAsC3B,MAAA,CAAQ4B,GAAA,eAAkBpC,EAAA,MAAWE,YAAA,CAAamC,aAAA,OAAAC,aAAA,QAAAC,aAAA,WAAgE3C,EAAA4C,GAAA5C,EAAA,sBAAA6C,EAAAC,GAA2C,OAAA1C,EAAA,MAAgB2C,IAAAD,EAAAxC,YAAA,CAAqB0C,aAAA,uBAAmCC,MAAAH,IAAA9C,EAAAkD,gBACppD,qCACA,IAA0B,CAAAlD,EAAAsB,GAAA,qBAAAtB,EAAAmD,GAAAN,EAAAO,MAAA,UAAApD,EAAAmD,GAAAN,EAAAQ,KAAA,uBAAAjD,EAAA,WAA0GQ,MAAA,CAAO0C,QAAA,SAAAT,EAAAQ,IAAAE,UAAA,QAA8C,CAAAnD,EAAA,QAAaE,YAAA,CAAakD,MAAA,OAAAC,OAAA,WAAkC7C,MAAA,CAAQC,KAAA,KAAAE,KAAA,oBAAsCE,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAnB,EAAA0D,gBAAAb,EAAAQ,UAAoC,SAAU,aAAAjD,EAAA,YAA8BQ,MAAA,CAAOkB,MAAA,mBAAAC,KAAA,eAAgD,CAAA3B,EAAA,OAAAA,EAAA,OAAsBQ,MAAA,CAAOoB,KAAA,OAAa,CAAA5B,EAAA,aAAkBuD,IAAA,iBAAArD,YAAA,CAAkCsD,YAAA,SAAoBhD,MAAA,CAAQiD,KAAA,OAAAC,MAAA,SAAA7B,MAAA,GAAAzB,MAAA,OAAAD,OAAA,SAA0EU,GAAA,CAAK8C,KAAA/D,EAAAgE,SAAmBpC,MAAA,CAAQK,MAAAjC,EAAA6B,KAAA,WAAAK,SAAA,SAAAC,GAAqDnC,EAAAoC,KAAApC,EAAA6B,KAAA,aAAAM,IAAsCE,WAAA,sBAA+B,GAAAjC,EAAA,OAAgBQ,MAAA,CAAOoB,KAAA,OAAa,CAAA5B,EAAA,OAAYE,YAAA,CAAaE,MAAA,OAAAD,OAAA,SAAgCK,MAAA,CAAQ4B,GAAA,qBAAyB,CAAApC,EAAA,iBAAAA,EAAA,YAAqCQ,MAAA,CAAOkB,MAAA,iBAAAC,KAAA,gBAA+C,CAAA3B,EAAA,OAAAA,EAAA,OAAsBQ,MAAA,CAAOoB,KAAA,MAAY,CAAA5B,EAAA,SAAcQ,MAAA,CAAOG,KAAA,UAAgBa,MAAA,CAAQK,MAAAjC,EAAA6B,KAAA,YAAAK,SAAA,SAAAC,GAAsDnC,EAAAoC,KAAApC,EAAA6B,KAAA,cAAA7B,EAAAiE,GAAA9B,KAA+CE,WAAA,uBAAgC,WAAAjC,EAAA,YAA6BQ,MAAA,CAAOkB,MAAA,SAAgB,CAAA1B,EAAA,YAAAA,EAAA,QAA4BQ,MAAA,CAAOsD,KAAA,QAAcA,KAAA,QAAa,CAAAlE,EAAAsB,GAAA,OAAAlB,EAAA,QAA2BQ,MAAA,CAAOsD,KAAA,SAAeA,KAAA,SAAc,CAAAlE,EAAAsB,GAAA,0BACv4C6C,EAAA,6DCqHAC,EAAA,CACAhB,KAAA,iBACAiB,WAAA,CAAAC,UAAA1E,EAAA,SACA2E,KAAA,WACA,OACA1C,KAAA,CACA2C,aAAA,GACAC,YAAA,GACAC,WAAA,GACAC,YAAA,IAEAC,aAAA,GACAjD,cAAA,CACA6C,aAAA,CACA,CAAAzD,KAAA,SAAA8D,UAAA,EAAAC,QAAA,cAEAL,YAAA,CACA,CAAA1D,KAAA,SAAA8D,UAAA,EAAAE,QAAA,mBACA,CACAC,UADA,SACAC,EAAAhD,EAAAC,GACAgD,EAAA,WAAAC,MACAC,KAAA,sBAAA/B,IAAApB,IACAoD,KAAA,SAAAC,GACA,YAAAA,EAAAf,KAAAgB,OAAArD,IACAA,EAAA,IAAAsD,MAAAF,EAAAf,KAAAkB,SAEAC,MAAA,SAAAC,GACAzD,EAAA,IAAAsD,MAAAG,OAGAC,QAAA,SAGAlB,WAAA,EAAA3D,KAAA,SAAA8D,UAAA,IACAF,YAAA,EAAA5D,KAAA,SAAA8D,UAAA,OAIAgB,QAAA,eAAAC,EAAA7F,KACAA,KAAAkF,MACAY,IAAA,aACAV,KAAA,SAAAC,GACA,SAAAA,EAAAC,OAIA,UAAAC,MAAAF,EAAAC,OAAAD,EAAAU,YAHA,eAAAV,EAAAf,KAAAgB,OAEA,UAAAC,MAAAF,EAAAf,KAAAkB,MADAK,EAAAlB,aAAAU,EAAAf,YAIAmB,MAAA,SAAAC,GACAM,QAAAC,MAAAP,MAGAQ,QAAA,CACAnC,QAAA,WACApE,EAAA,QACAA,EAAA,QACAA,EAAA,QACA,IAAAwG,EAAAnG,KAAAoG,MAAAC,eAAAF,OACAA,EAAAnF,GAAA,OAAAhB,KAAAsG,gBAEAhF,OAAA,eAAAiF,EAAAvG,KACAA,KAAAkF,MACAC,KAAA,oBACAhC,KAAAnD,KAAA4B,KAAA2C,aACAnB,IAAApD,KAAA4B,KAAA4C,YACAC,WAAAzE,KAAA4B,KAAA6C,WACA+B,cAAAxG,KAAA4B,KAAA8C,cAEAU,KAAA,SAAAC,GACA,SAAAA,EAAAC,OAKA,UAAAC,MAAAF,EAAAC,OAAAD,EAAAU,YAJA,eAAAV,EAAAf,KAAAgB,OAGA,UAAAC,MAAAF,EAAAf,KAAAkB,MAFAe,EAAAE,SAAAC,QAAA,QACAH,EAAApF,QAAAwF,KAAA,sBAIAlB,MAAA,SAAAC,GACAa,EAAAE,SAAAR,MAAAP,EAAAb,YAGAyB,cA5BA,WA6BAN,QAAAY,IAAA,UACA,IACA,IAAAC,EAAAC,EAAA,0BACAC,EAAAF,EAAAG,OAAA,KACAC,EAAA,IAAAC,EAAA,KAAAL,EAAAE,GACAI,EAAA,IAAAD,EAAA,KAAAE,KAAAC,MAAArH,KAAA4B,KAAA6C,aACA6C,EAAAH,EAAAI,QACAN,EAAAO,QACAP,EAAAQ,SAAAH,EAAAI,OACAT,EAAAU,SAAAL,EAAAM,OACAX,EAAAY,cAAAP,EAAAQ,YACAb,EAAAc,YAAAT,EAAAU,UACAf,EAAAgB,WAAAX,EAAAY,SACAjB,EAAAkB,SACA,MAAAzC,GACAM,QAAAY,IAAAlB,KAGAjC,gBA/CA,SA+CAL,GACA4C,QAAAY,IAAAxD,GACA,IAAAgF,EAAAC,SAAAC,cAAA,cACAF,EAAApG,MAAAoB,EACAgF,EAAApB,SACAqB,SAAAE,YAAA,UAGAC,SAAA,CACAvF,gBAAA,WACA,OAAAwF,OAAAC,KAAA1I,KAAA2E,cAAAgE,OAAA,KCrOwVC,EAAA,0BCQxVC,EAAgBJ,OAAAK,EAAA,KAAAL,CACdG,EACA9I,EACAoE,GACF,EACA,KACA,KACA,MAIe6E,EAAA,WAAAF","file":"js/chunk-af1b6d16.308c392a.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowCreate.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowCreate.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{staticStyle:{\"height\":\"100%\",\"width\":\"80%\",\"margin\":\"0 auto\"}},[_c('Header',{staticStyle:{\"background\":\"transparent\",\"padding\":\"0\"}},[_c('Button',{attrs:{\"size\":\"large\",\"shape\":\"circle\",\"type\":\"default\",\"icon\":\"md-arrow-round-back\"},on:{\"click\":function($event){return _vm.$router.replace('/center/workflow')}}}),_vm._v(\" \\n    \"),_c('Button',{attrs:{\"size\":\"large\",\"shape\":\"circle\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"提交\")])],1),_c('Layout',{staticStyle:{\"height\":\"100%\",\"background\":\"#fff\",\"padding\":\"50px 50px 0 50px\"}},[_c('Form',{attrs:{\"label-position\":\"left\",\"label-width\":100,\"rules\":_vm.rulesValidate,\"model\":_vm.form}},[_c('FormItem',{attrs:{\"label\":\"工作流名称\",\"prop\":\"workflowName\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Input',{model:{value:(_vm.form.workflowName),callback:function ($$v) {_vm.$set(_vm.form, \"workflowName\", $$v)},expression:\"form.workflowName\"}})],1)],1)],1),_c('FormItem',{attrs:{\"label\":\"URI\",\"prop\":\"workflowURI\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"20\"}},[_c('Input',{model:{value:(_vm.form.workflowURI),callback:function ($$v) {_vm.$set(_vm.form, \"workflowURI\", $$v)},expression:\"form.workflowURI\"}})],1)],1)],1),_c('FormItem',{attrs:{\"label\":\"可选函数列表\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('input',{staticStyle:{\"position\":\"absolute\",\"left\":\"-999em\"},attrs:{\"id\":\"dummy-uri\"}}),_c('ul',{staticStyle:{\"list-style\":\"none\",\"max-height\":\"100px\",\"overflow-y\":\"scroll\"}},_vm._l((_vm.functionList),function(f,idx){return _c('li',{key:idx,staticStyle:{\"border-top\":\"solid 1px lightgrey\"},style:(idx === _vm.functionLastOne\n                    ? 'border-bottom: solid 1px lightgrey'\n                    : '')},[_vm._v(\"\\n                \"+_vm._s(f.name)+\" (URI: \"+_vm._s(f.uri)+\")\\n                \"),_c('Tooltip',{attrs:{\"content\":'copy: ' + f.uri,\"placement\":\"top\"}},[_c('Icon',{staticStyle:{\"color\":\"blue\",\"cursor\":\"pointer\"},attrs:{\"size\":\"16\",\"type\":\"ios-copy-outline\"},on:{\"click\":function($event){return _vm.copyToClipboard(f.uri)}}})],1)],1)}),0)])],1)],1),_c('FormItem',{attrs:{\"label\":\"工作流定义(JSON有限状态机)\",\"prop\":\"definition\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"14\"}},[_c('AceEditor',{ref:\"workflowEditor\",staticStyle:{\"font-size\":\"0.9em\"},attrs:{\"lang\":\"json\",\"theme\":\"chrome\",\"value\":\"\",\"width\":\"100%\",\"height\":\"420px\"},on:{\"init\":_vm.aceInit},model:{value:(_vm.form.definition),callback:function ($$v) {_vm.$set(_vm.form, \"definition\", $$v)},expression:\"form.definition\"}})],1),_c('Col',{attrs:{\"span\":\"10\"}},[_c('svg',{staticStyle:{\"width\":\"100%\",\"height\":\"420px\"},attrs:{\"id\":\"workflow-preview\"}},[_c('g')])])],1)],1),_c('FormItem',{attrs:{\"label\":\"最大闲置时间(Minute)\",\"prop\":\"maxIdleTime\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"6\"}},[_c('Input',{attrs:{\"type\":\"number\"},model:{value:(_vm.form.maxIdleTime),callback:function ($$v) {_vm.$set(_vm.form, \"maxIdleTime\", _vm._n($$v))},expression:\"form.maxIdleTime\"}})],1)],1)],1),_c('FormItem',{attrs:{\"label\":\"立即部署\"}},[_c('i-switch',[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"是\")]),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"否\")])])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- <Layout style=\"height: 100%; width: 60%; margin: 0 auto;\"> -->\n  <Layout style=\"height: 100%; width: 80%; margin: 0 auto;\">\n    <!-- <Row>\n      <Col :xs=\"1\" :sm=\"1\" :md=\"2\" :lg=\"4\">&nbsp;</Col>\n    <Col :xs=\"22\" :sm=\"22\" :md=\"20\" :lg=\"16\">-->\n    <Header style=\"background: transparent; padding: 0;\">\n      <Button\n        size=\"large\"\n        shape=\"circle\"\n        type=\"default\"\n        icon=\"md-arrow-round-back\"\n        @click=\"$router.replace('/center/workflow')\"\n      />&nbsp;\n      <Button size=\"large\" shape=\"circle\" type=\"primary\" @click=\"submit()\"\n        >提交</Button\n      >\n    </Header>\n    <Layout style=\"height: 100%; background: #fff; padding: 50px 50px 0 50px;\">\n      <Form\n        label-position=\"left\"\n        :label-width=\"100\"\n        :rules=\"rulesValidate\"\n        :model=\"form\"\n      >\n        <FormItem label=\"工作流名称\" prop=\"workflowName\">\n          <Row>\n            <Col span=\"12\">\n              <Input v-model=\"form.workflowName\" />\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem label=\"URI\" prop=\"workflowURI\">\n          <Row>\n            <Col span=\"20\">\n              <Input v-model=\"form.workflowURI\" />\n              <!-- <span slot=\"prepend\">这里是用户UID/function</span> -->\n              <!-- </Input> -->\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem label=\"可选函数列表\">\n          <Row>\n            <Col span=\"12\">\n              <input style=\"position: absolute; left: -999em;\" id=\"dummy-uri\" />\n              <ul\n                style=\"list-style: none; max-height: 100px; overflow-y: scroll\"\n              >\n                <li\n                  v-for=\"(f, idx) in functionList\"\n                  :key=\"idx\"\n                  style=\"border-top: solid 1px lightgrey\"\n                  :style=\"\n                    idx === functionLastOne\n                      ? 'border-bottom: solid 1px lightgrey'\n                      : ''\n                  \"\n                >\n                  {{ f.name }} (URI: {{ f.uri }})\n                  <Tooltip :content=\"'copy: ' + f.uri\" placement=\"top\">\n                    <Icon\n                      size=\"16\"\n                      type=\"ios-copy-outline\"\n                      style=\"color: blue; cursor: pointer;\"\n                      @click=\"copyToClipboard(f.uri)\"\n                    />\n                  </Tooltip>\n                </li>\n              </ul>\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem label=\"工作流定义(JSON有限状态机)\" prop=\"definition\">\n          <Row>\n            <Col span=\"14\">\n              <AceEditor\n                ref=\"workflowEditor\"\n                v-model=\"form.definition\"\n                @init=\"aceInit\"\n                lang=\"json\"\n                theme=\"chrome\"\n                value\n                width=\"100%\"\n                height=\"420px\"\n                style=\"font-size: 0.9em;\"\n              />\n            </Col>\n            <Col span=\"10\">\n              <svg id=\"workflow-preview\" style=\"width: 100%; height: 420px;\">\n                <g></g>\n              </svg>\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem label=\"最大闲置时间(Minute)\" prop=\"maxIdleTime\">\n          <Row>\n            <Col span=\"6\">\n              <Input type=\"number\" v-model.number=\"form.maxIdleTime\" />\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem label=\"立即部署\">\n          <i-switch>\n            <span slot=\"open\">是</span>\n            <span slot=\"close\">否</span>\n          </i-switch>\n        </FormItem>\n      </Form>\n    </Layout>\n    <!-- </Col> -->\n    <!-- <Col :xs=\"1\" :sm=\"1\" :md=\"2\" :lg=\"4\">&nbsp;</Col> -->\n    <!-- </Row> -->\n  </Layout>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport * as d3 from \"d3\";\n// import * as dagre from \"dagre-d3\";\nimport { WorkflowVis, Workflow } from \"@/assets/workflow-vis.js\";\nexport default {\n  name: \"WorkflowCreate\",\n  components: { AceEditor: require(\"vue2-ace-editor\") },\n  data: function() {\n    return {\n      form: {\n        workflowName: \"\",\n        workflowURI: \"\",\n        definition: \"\",\n        maxIdleTime: 60\n      },\n      functionList: [],\n      rulesValidate: {\n        workflowName: [\n          { type: \"string\", required: true, message: \"工作流名称不能为空\" }\n        ],\n        workflowURI: [\n          { type: \"string\", required: true, pattern: /^[A-Za-z0-9-]+$/ },\n          {\n            validator(rule, value, callback) {\n              Vue.axios\n                .post(\"/workflow/validate\", { uri: value })\n                .then(function(rep) {\n                  if (rep.data.status === \"success\") callback();\n                  else callback(new Error(rep.data.info));\n                })\n                .catch(function(err) {\n                  callback(new Error(err));\n                });\n            },\n            trigger: \"blur\"\n          }\n        ],\n        definition: [{ type: \"string\", required: true }],\n        maxIdleTime: [{ type: \"number\", required: true }]\n      }\n    };\n  },\n  mounted: function() {\n    this.axios\n      .get(\"/function\")\n      .then(rep => {\n        if (rep.status === 200) {\n          if (rep.data.status === \"success\") {\n            this.functionList = rep.data.data;\n          } else throw new Error(rep.data.info);\n        } else throw new Error(rep.status + rep.statusText);\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  },\n  methods: {\n    aceInit: function() {\n      require(\"brace/ext/language_tools\");\n      require(\"brace/mode/json\");\n      require(\"brace/theme/chrome\");\n      let editor = this.$refs.workflowEditor.editor;\n      editor.on(\"blur\", this.updatePreview);\n    },\n    submit: function() {\n      this.axios\n        .post(\"/workflow/create\", {\n          name: this.form.workflowName,\n          uri: this.form.workflowURI,\n          definition: this.form.definition,\n          max_idle_time: this.form.maxIdleTime\n        })\n        .then(rep => {\n          if (rep.status === 200) {\n            if (rep.data.status === \"success\") {\n              this.$Message.success(\"创建成功\");\n              this.$router.push(\"/center/workflow\");\n            } else throw new Error(rep.data.info);\n          } else throw new Error(rep.status + rep.statusText);\n        })\n        .catch(err => {\n          this.$Message.error(err.message);\n        });\n    },\n    updatePreview() {\n      console.log(\"update\");\n      try {\n        let svg = d3.select(\"#workflow-preview\");\n        let inner = svg.select(\"g\");\n        let vis = new WorkflowVis(svg, inner);\n        let workflow = new Workflow(JSON.parse(this.form.definition));\n        let dag = workflow.toDAG();\n        vis.clear();\n        vis.setNodes(dag.nodes);\n        vis.setEdges(dag.edges);\n        vis.setStartNodes(dag.startNodes);\n        vis.setEndNodes(dag.endNodes);\n        vis.setParents(dag.parents);\n        vis.redraw();\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    copyToClipboard(uri) {\n      console.log(uri);\n      let node = document.querySelector(\"#dummy-uri\");\n      node.value = uri;\n      node.select();\n      document.execCommand(\"copy\");\n    }\n  },\n  computed: {\n    functionLastOne: function() {\n      return Object.keys(this.functionList).length - 1;\n    }\n  }\n};\n</script>\n\n<style>\n.node rect,\n.node circle,\n.node ellipse {\n  stroke: #333;\n  fill: #fff;\n  stroke-width: 1px;\n}\n\n.edgePath path {\n  stroke: #333;\n  fill: #333;\n  stroke-width: 1.5px;\n}\n\n.cluster rect {\n  stroke: #333;\n  fill: #fff;\n  stroke-dasharray: 5;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowCreate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowCreate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorkflowCreate.vue?vue&type=template&id=2cad6b68&\"\nimport script from \"./WorkflowCreate.vue?vue&type=script&lang=js&\"\nexport * from \"./WorkflowCreate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorkflowCreate.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/components/WorkflowManage.vue?fc2f","webpack:///./src/components/WorkflowView.vue?8fe9","webpack:///src/components/WorkflowView.vue","webpack:///./src/components/WorkflowView.vue?b194","webpack:///./src/components/WorkflowView.vue?d5b4","webpack:///src/components/WorkflowManage.vue","webpack:///./src/components/WorkflowManage.vue?30b0","webpack:///./src/components/WorkflowManage.vue?35e4","webpack:///./src/components/WorkflowView.vue?bf31","webpack:///./src/components/WorkflowManage.vue?629f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","min-height","width","margin","background","padding","attrs","shape","size","type","on","click","$event","$router","push","_v","icon","refreshWorkflows","selectWorkflow","selected_idx","height","xs","sm","md","lg","overflow-y","_l","w","idx","key","staticClass","id","preventDefault","stopPropagation","status","_s","name","padding-left","workflowInfo","current_workflow","_e","staticRenderFns","WorkflowViewvue_type_template_id_51cbe1ac_render","mode","theme","active-name","on-select","currentTab","display","float","margin-right","directives","rawName","value","expression","margin-top","span","uri","max_idle_time","model","callback","$$v","isRunning","slot","title","color","url","window","location","host","label-position","label-width","rules","rulesValidate","form","label","prop","disabled","position","left","list-style","max-height","f","border-top","style","functionLastOne","content","placement","cursor","copyToClipboard","ref","font-size","lang","init","aceInit","$set","testForm","test","line-height","output","WorkflowViewvue_type_template_id_51cbe1ac_staticRenderFns","WorkflowViewvue_type_script_lang_js_","props","components","AceEditor","__webpack_require__","data","deviceIP","input","definition","maxIdleTime","functionList","required","workflowUpdater","wsConnection","mounted","_this","console","log","axios","get","then","rep","Error","statusText","info","catch","err","error","computed","set","Object","keys","length","watch","newValue","setTimeout","updatePreview","testInitialize","beforeDestroy","readyState","WebSocket","CLOSED","CLOSING","close","methods","_this2","clear","post","ip","concat","recordId","onmessage","msg","JSON","parse","update","role","onerror","onclose","$Message","message","editor","$refs","workflowEditor","submit","_this3","file","put","headers","Content-Type","modify","$$Message","_this4","functionName","functionURI","memory_limit","memoryLimit","environment","entrypoint","code_url","success","svg","d3","inner","select","vis","workflow_vis","workflow","dag","toDAG","setNodes","nodes","setEdges","edges","setStartNodes","startNodes","setEndNodes","endNodes","setParents","parents","redraw","node","document","querySelector","execCommand","components_WorkflowViewvue_type_script_lang_js_","component","componentNormalizer","WorkflowView","WorkflowManagevue_type_script_lang_js_","workflows","undefined","$nextTick","classList","remove","add","components_WorkflowManagevue_type_script_lang_js_","WorkflowManage_component","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WorkflowView_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WorkflowView_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WorkflowManage_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WorkflowManage_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-50bc560d.2fa9441d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{staticStyle:{\"min-height\":\"calc(100vh - 128px)\",\"width\":\"80%\",\"margin\":\"0 auto\"}},[_c('Header',{staticStyle:{\"background\":\"#f8f8f9\",\"padding\":\"0\"}},[_c('Button',{attrs:{\"shape\":\"circle\",\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push('/center/workflow/create')}}},[_vm._v(\"\\n      创建新工作流 \")]),_vm._v(\" \\n    \"),_c('Button',{attrs:{\"icon\":\"md-refresh\",\"shape\":\"circle\",\"size\":\"large\",\"type\":\"default\"},on:{\"click\":function($event){_vm.refreshWorkflows(function () { return _vm.selectWorkflow(_vm.selected_idx); })}}})],1),_c('Layout',{staticStyle:{\"height\":\"100%\",\"background\":\"#fff\",\"padding\":\"16px\"}},[_c('Row',{staticStyle:{\"height\":\"100%\"}},[_c('Col',{staticStyle:{\"height\":\"100%\"},attrs:{\"xs\":8,\"sm\":8,\"md\":6,\"lg\":4}},[_c('Layout',{staticStyle:{\"height\":\"100%\",\"overflow-y\":\"auto\",\"background\":\"#fff\"}},[_c('h2',[_vm._v(\"工作流列表\")]),_c('br'),_c('ul',_vm._l((_vm.workflows),function(w,idx){return _c('li',{key:idx,staticClass:\"workflow-wrapper\",attrs:{\"id\":'workflow' + idx},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.selectWorkflow(idx)}}},[_c('div',{staticClass:\"workflow-name\"},[_c('Badge',{attrs:{\"status\":\"default\"}}),_vm._v(\"\\n                \"+_vm._s(w.name)+\"\\n              \")],1)])}),0)])],1),_c('Col',{staticStyle:{\"height\":\"100%\",\"padding-left\":\"16px\"},attrs:{\"xs\":16,\"sm\":16,\"md\":18,\"lg\":20}},[(_vm.current_workflow)?_c('Layout',[_c('WorkflowView',{key:_vm.selected_idx,attrs:{\"workflowInfo\":_vm.current_workflow}})],1):_vm._e()],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{staticStyle:{\"background\":\"#fff\",\"padding\":\"20px\"}},[_c('Row',[_c('Menu',{attrs:{\"mode\":\"horizontal\",\"theme\":\"light\",\"active-name\":\"overview\"},on:{\"on-select\":function($event){_vm.currentTab = $event}}},[_c('h2',{staticStyle:{\"display\":\"inline-block\",\"float\":\"left\",\"margin-right\":\"20px\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.workflowInfo.name)+\"\\n      \")]),_c('MenuItem',{attrs:{\"name\":\"overview\"}},[_vm._v(\"\\n        概览\\n      \")]),_c('MenuItem',{attrs:{\"name\":\"edit\"}},[_vm._v(\"\\n        编辑\\n      \")]),_c('MenuItem',{attrs:{\"name\":\"test\"}},[_vm._v(\"\\n        测试\\n      \")])],1)],1),_c('Row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTab === 'overview'),expression:\"currentTab === 'overview'\"}]},[_c('Row',{staticClass:\"info-line\",staticStyle:{\"margin-top\":\"20px\"}},[_c('Col',{attrs:{\"span\":\"4\"}},[_vm._v(\"工作流名称：\")]),_c('Col',{attrs:{\"span\":\"8\"}},[_vm._v(_vm._s(_vm.workflowInfo.name))]),_c('Col',{attrs:{\"span\":\"4\"}},[_vm._v(\"资源URI：\")]),_c('Col',{attrs:{\"span\":\"8\"}},[_vm._v(_vm._s(_vm.workflowInfo.uri))])],1),_c('Row',{staticClass:\"info-line\"},[_c('Col',{attrs:{\"span\":\"4\"}},[_vm._v(\"最大闲置时间(分)：\")]),_c('Col',{attrs:{\"span\":\"8\"}},[_vm._v(_vm._s(_vm.workflowInfo.max_idle_time))]),_c('Col',{attrs:{\"span\":\"4\"}},[_vm._v(\"部署状态：\")]),_c('Col',{attrs:{\"span\":\"8\"}},[_c('i-switch',{model:{value:(_vm.isRunning),callback:function ($$v) {_vm.isRunning=$$v},expression:\"isRunning\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"是\")]),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"否\")])])],1)],1),_c('Row',{staticClass:\"info-line\"},[_c('Col',{attrs:{\"span\":\"12\"}},[_c('StatsLineChart',{key:1,attrs:{\"title\":'实时请求数',\"color\":'rgba(54, 162, 235, 0.2)',\"url\":'ws://' +\n              _vm.window.location.host +\n              '/stats/ws/request/' +\n              _vm.workflowInfo.uri,\"height\":300}})],1)],1)],1),_c('Row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTab === 'edit'),expression:\"currentTab === 'edit'\"}]},[_c('Form',{staticStyle:{\"margin-top\":\"30px\"},attrs:{\"label-position\":\"left\",\"label-width\":130,\"rules\":_vm.rulesValidate,\"model\":_vm.form}},[_c('FormItem',{attrs:{\"label\":\"工作流名称\",\"prop\":\"workflowName\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Input',{attrs:{\"value\":_vm.workflowInfo.name,\"disabled\":\"\"}})],1)],1)],1),_c('FormItem',{attrs:{\"label\":\"URI\",\"prop\":\"workflowURI\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"20\"}},[_c('Input',{attrs:{\"value\":_vm.workflowInfo.uri,\"disabled\":\"\"}})],1)],1)],1),_c('FormItem',{attrs:{\"label\":\"可选函数列表\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('input',{staticStyle:{\"position\":\"absolute\",\"left\":\"-999em\"},attrs:{\"id\":\"dummy-uri\"}}),_c('ul',{staticStyle:{\"list-style\":\"none\",\"max-height\":\"100px\",\"overflow-y\":\"scroll\"}},_vm._l((_vm.functionList),function(f,idx){return _c('li',{key:idx,staticStyle:{\"border-top\":\"solid 1px lightgrey\"},style:(idx === _vm.functionLastOne\n                    ? 'border-bottom: solid 1px lightgrey'\n                    : '')},[_vm._v(\"\\n                \"+_vm._s(f.name)+\" (URI: \"+_vm._s(f.uri)+\")\\n                \"),_c('Tooltip',{attrs:{\"content\":'copy: ' + f.uri,\"placement\":\"top\"}},[_c('Icon',{staticStyle:{\"color\":\"blue\",\"cursor\":\"pointer\"},attrs:{\"size\":\"16\",\"type\":\"ios-copy-outline\"},on:{\"click\":function($event){return _vm.copyToClipboard(f.uri)}}})],1)],1)}),0)])],1)],1),_c('FormItem',{attrs:{\"label\":\"工作流定义(JSON有限状态机)\",\"prop\":\"definition\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"14\"}},[_c('AceEditor',{ref:\"workflowEditor\",staticStyle:{\"font-size\":\"0.9em\"},attrs:{\"lang\":\"json\",\"theme\":\"chrome\",\"value\":\"\",\"width\":\"100%\",\"height\":\"430px\"},on:{\"init\":_vm.aceInit},model:{value:(_vm.form.definition),callback:function ($$v) {_vm.$set(_vm.form, \"definition\", $$v)},expression:\"form.definition\"}})],1),_c('Col',{attrs:{\"span\":\"10\"}},[_c('svg',{staticStyle:{\"width\":\"100%\",\"height\":\"430px\"},attrs:{\"id\":\"workflow-preview\"}},[_c('g')])])],1)],1),_c('FormItem',{attrs:{\"label\":\"最大闲置时间(Minute)\",\"prop\":\"maxIdleTime\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"6\"}},[_c('Input',{attrs:{\"type\":\"number\"},model:{value:(_vm.form.maxIdleTime),callback:function ($$v) {_vm.$set(_vm.form, \"maxIdleTime\", $$v)},expression:\"form.maxIdleTime\"}})],1)],1)],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"提交\")])],1)],1)],1),_c('Row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTab === 'test'),expression:\"currentTab === 'test'\"}]},[_c('Row',[_c('Form',{staticStyle:{\"margin-top\":\"30px\"},attrs:{\"label-position\":\"left\",\"label-width\":130,\"model\":_vm.testForm}},[_c('FormItem',{attrs:{\"label\":\"物联网节点IP\",\"prop\":\"deviceIP\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"8\"}},[_c('Input',{attrs:{\"type\":\"text\"},model:{value:(_vm.testForm.deviceIP),callback:function ($$v) {_vm.$set(_vm.testForm, \"deviceIP\", $$v)},expression:\"testForm.deviceIP\"}})],1),_c('Col',{attrs:{\"span\":\"1\"}},[_vm._v(\" \")]),_c('Col',{attrs:{\"span\":\"8\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.test}},[_vm._v(\"发送\")])],1)],1)],1),_c('FormItem',{attrs:{\"label\":\"输入数据(JSON)\",\"prop\":\"input\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"24\"}},[_c('AceEditor',{ref:\"inputEditor\",staticStyle:{\"font-size\":\"0.9em\"},attrs:{\"lang\":\"json\",\"theme\":\"chrome\",\"width\":\"100%\",\"height\":\"170px\"},model:{value:(_vm.testForm.input),callback:function ($$v) {_vm.$set(_vm.testForm, \"input\", $$v)},expression:\"testForm.input\"}})],1)],1)],1),_c('FormItem',{attrs:{\"label\":\"工作流状态\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"14\"}},[_c('svg',{staticStyle:{\"width\":\"100%\",\"height\":\"420px\"},attrs:{\"id\":\"workflow-test\"}},[_c('g')])]),_c('Col',{attrs:{\"span\":\"10\"}},[_c('pre',{staticStyle:{\"width\":\"100%\",\"padding\":\"10px\",\"background\":\"lightgray\",\"max-height\":\"420px\",\"overflow-y\":\"auto\",\"line-height\":\"1.3\"}},[_vm._v(_vm._s(_vm.output)+\"\\n              \")])])],1)],1)],1)],1),_c('Row')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Layout style=\"background: #fff; padding: 20px;\">\n    <Row>\n      <Menu\n        mode=\"horizontal\"\n        theme=\"light\"\n        active-name=\"overview\"\n        @on-select=\"currentTab = $event\"\n      >\n        <h2 style=\"display: inline-block; float: left; margin-right: 20px;\">\n          {{ workflowInfo.name }}\n        </h2>\n        <MenuItem name=\"overview\">\n          概览\n        </MenuItem>\n        <MenuItem name=\"edit\">\n          编辑\n        </MenuItem>\n        <MenuItem name=\"test\">\n          测试\n        </MenuItem>\n      </Menu>\n    </Row>\n    <Row v-show=\"currentTab === 'overview'\">\n      <Row class=\"info-line\" style=\"margin-top: 20px;\">\n        <Col span=\"4\">工作流名称：</Col>\n        <Col span=\"8\">{{ workflowInfo.name }}</Col>\n        <Col span=\"4\">资源URI：</Col>\n        <Col span=\"8\">{{ workflowInfo.uri }}</Col>\n      </Row>\n      <Row class=\"info-line\">\n        <Col span=\"4\">最大闲置时间(分)：</Col>\n        <Col span=\"8\">{{ workflowInfo.max_idle_time }}</Col>\n        <Col span=\"4\">部署状态：</Col>\n        <Col span=\"8\">\n          <i-switch v-model=\"isRunning\">\n            <span slot=\"open\">是</span>\n            <span slot=\"close\">否</span>\n          </i-switch>\n        </Col>\n      </Row>\n      <Row class=\"info-line\">\n        <Col span=\"12\">\n          <StatsLineChart\n            :key=\"1\"\n            :title=\"'实时请求数'\"\n            :color=\"'rgba(54, 162, 235, 0.2)'\"\n            :url=\"\n              'ws://' +\n                window.location.host +\n                '/stats/ws/request/' +\n                workflowInfo.uri\n            \"\n            :height=\"300\"\n          />\n        </Col>\n      </Row>\n    </Row>\n    <Row v-show=\"currentTab === 'edit'\">\n      <Form\n        label-position=\"left\"\n        :label-width=\"130\"\n        :rules=\"rulesValidate\"\n        :model=\"form\"\n        style=\"margin-top: 30px;\"\n      >\n        <FormItem label=\"工作流名称\" prop=\"workflowName\">\n          <Row>\n            <Col span=\"12\">\n              <Input :value=\"workflowInfo.name\" disabled />\n              <!-- <Input v-model=\"form.functionName\" /> -->\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem label=\"URI\" prop=\"workflowURI\">\n          <Row>\n            <Col span=\"20\">\n              <Input :value=\"workflowInfo.uri\" disabled />\n              <!-- <Input v-model=\"form.functionURI\" /> -->\n              <!-- <span slot=\"prepend\">这里是用户UID/function</span> -->\n              <!-- </Input> -->\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem label=\"可选函数列表\">\n          <Row>\n            <Col span=\"12\">\n              <input style=\"position: absolute; left: -999em;\" id=\"dummy-uri\" />\n              <ul\n                style=\"list-style: none; max-height: 100px; overflow-y: scroll\"\n              >\n                <li\n                  v-for=\"(f, idx) in functionList\"\n                  :key=\"idx\"\n                  style=\"border-top: solid 1px lightgrey\"\n                  :style=\"\n                    idx === functionLastOne\n                      ? 'border-bottom: solid 1px lightgrey'\n                      : ''\n                  \"\n                >\n                  {{ f.name }} (URI: {{ f.uri }})\n                  <Tooltip :content=\"'copy: ' + f.uri\" placement=\"top\">\n                    <Icon\n                      size=\"16\"\n                      type=\"ios-copy-outline\"\n                      style=\"color: blue; cursor: pointer;\"\n                      @click=\"copyToClipboard(f.uri)\"\n                    />\n                  </Tooltip>\n                </li>\n              </ul>\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem label=\"工作流定义(JSON有限状态机)\" prop=\"definition\">\n          <Row>\n            <Col span=\"14\">\n              <AceEditor\n                ref=\"workflowEditor\"\n                v-model=\"form.definition\"\n                @init=\"aceInit\"\n                lang=\"json\"\n                theme=\"chrome\"\n                value\n                width=\"100%\"\n                height=\"430px\"\n                style=\"font-size: 0.9em;\"\n              />\n            </Col>\n            <Col span=\"10\">\n              <svg id=\"workflow-preview\" style=\"width: 100%; height: 430px;\">\n                <g></g>\n              </svg>\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem label=\"最大闲置时间(Minute)\" prop=\"maxIdleTime\">\n          <Row>\n            <Col span=\"6\">\n              <Input type=\"number\" v-model=\"form.maxIdleTime\" />\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem>\n          <Button type=\"primary\">提交</Button>\n        </FormItem>\n      </Form>\n    </Row>\n    <Row v-show=\"currentTab === 'test'\">\n      <Row>\n        <Form\n          label-position=\"left\"\n          :label-width=\"130\"\n          :model=\"testForm\"\n          style=\"margin-top: 30px\"\n        >\n          <FormItem label=\"物联网节点IP\" prop=\"deviceIP\">\n            <Row>\n              <Col span=\"8\">\n                <Input type=\"text\" v-model=\"testForm.deviceIP\" />\n              </Col>\n              <Col span=\"1\">&nbsp;</Col>\n              <Col span=\"8\">\n                <Button type=\"primary\" @click=\"test\">发送</Button>\n              </Col>\n            </Row>\n          </FormItem>\n          <FormItem label=\"输入数据(JSON)\" prop=\"input\">\n            <Row>\n              <Col span=\"24\">\n                <AceEditor\n                  ref=\"inputEditor\"\n                  v-model=\"testForm.input\"\n                  lang=\"json\"\n                  theme=\"chrome\"\n                  width=\"100%\"\n                  height=\"170px\"\n                  style=\"font-size: 0.9em\"\n                />\n              </Col>\n            </Row>\n          </FormItem>\n          <FormItem label=\"工作流状态\">\n            <Row>\n              <Col span=\"14\">\n                <svg id=\"workflow-test\" style=\"width: 100%; height: 420px;\">\n                  <g></g>\n                </svg>\n              </Col>\n              <Col span=\"10\">\n                <pre\n                  style=\"width: 100%; padding: 10px; background: lightgray; max-height: 420px; overflow-y: auto; line-height: 1.3;\"\n                  >{{ output }}\n                </pre>\n              </Col>\n            </Row>\n          </FormItem>\n        </Form>\n      </Row>\n      <Row> </Row>\n    </Row>\n  </Layout>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport {\n  WorkflowVis,\n  Workflow,\n  WorkflowUpdater\n} from \"@/assets/workflow-vis.js\";\nexport default {\n  name: \"WorkflowView\",\n  props: [\"workflowInfo\"],\n  components: { AceEditor: require(\"vue2-ace-editor\") },\n  data: function() {\n    return {\n      currentTab: \"overview\",\n      testForm: {\n        deviceIP: \"\",\n        input: \"\"\n      },\n      form: {\n        definition: this.workflowInfo.definition,\n        maxIdleTime: this.workflowInfo.max_idle_time\n      },\n      functionList: [],\n      rulesValidate: {\n        definition: [{ type: \"string\", required: true }],\n        maxIdleTime: [{ type: \"number\", required: true }]\n      },\n      workflowUpdater: null,\n      output: \"\",\n      wsConnection: null\n    };\n  },\n  mounted: function() {\n    console.log(this.workflowInfo);\n    this.axios\n      .get(\"/function\")\n      .then(rep => {\n        if (rep.status === 200) {\n          if (rep.data.status === \"success\") {\n            this.functionList = rep.data.data;\n          } else throw new Error(rep.data.info);\n        } else throw new Error(rep.status + rep.statusText);\n      })\n      .catch(err => {\n        console.error(err);\n      });\n    // this.updatePreview();\n    require(\"brace/ext/language_tools\");\n    require(\"brace/mode/json\");\n    require(\"brace/theme/chrome\");\n  },\n  computed: {\n    isRunning: {\n      get: function() {\n        if (this.workflowInfo.status === \"running\") return true;\n        else return false;\n      },\n      set: function() {}\n    },\n    functionLastOne: function() {\n      return Object.keys(this.functionList).length - 1;\n    }\n  },\n  watch: {\n    currentTab: function(newValue) {\n      if (newValue === \"edit\") setTimeout(this.updatePreview, 500);\n      else if (newValue === \"test\") setTimeout(this.testInitialize, 500);\n    },\n    workflowInfo: function(newValue) {\n      this.form.definition = newValue.definition;\n      this.form.maxIdleTime = newValue.maxIdleTime;\n    }\n  },\n  beforeDestroy: function() {\n    if (this.wsConnection !== null) {\n      let readyState = this.wsConnection.readyState;\n      if (readyState !== WebSocket.CLOSED && readyState === WebSocket.CLOSING)\n        this.wsConnection.close();\n    }\n    this.wsConnection = null;\n  },\n  methods: {\n    test() {\n      this.workflowUpdater.clear();\n      this.axios\n        .post(\"/test/workflow\", {\n          ip: this.testForm.deviceIP,\n          uri: this.workflowInfo.uri,\n          data: this.testForm.input\n        })\n        .then(rep => {\n          if (rep.status === 200) {\n            if (rep.data.status === \"success\") {\n              //   let append = `ran on: ${rep.data.data.ip}, time cost: ${\n              //     rep.data.data.time\n              //   }\\n${JSON.stringify(rep.data.data.data, null, 4)}\\n`;\n              this.output += `${rep.data.data}\\n`;\n              let recordId = rep.data.data;\n              if (this.wsConnection !== null) {\n                let readyState = this.wsConnection.readyState;\n                if (\n                  readyState !== WebSocket.CLOSED &&\n                  readyState === WebSocket.CLOSING\n                )\n                  this.wsConnection.close();\n              }\n              this.wsConnection = new WebSocket(\n                `ws://${window.location.host}/test/ws/${recordId}`\n              );\n              this.wsConnection.onmessage = msg => {\n                // console.log(msg.data);\n                let data = JSON.parse(msg.data);\n                this.workflowUpdater.update(\n                  data.role,\n                  data.status,\n                  data.ip,\n                  data.info\n                );\n              };\n              this.wsConnection.onerror = err => console.error(err);\n              this.wsConnection.onclose = () => console.log(\"ws close\");\n            } else throw new Error(rep.data.info);\n          } else throw new Error(rep.status + rep.statusText);\n        })\n        .catch(err => {\n          this.$Message.error(err.message);\n        });\n    },\n    aceInit: function() {\n      let editor = this.$refs.workflowEditor.editor;\n      editor.on(\"blur\", this.updatePreview);\n    },\n    submit: function() {\n      if (this.form.file !== null) {\n        this.axios\n          .post(\"/function/token\", { uri: this.workflowInfo.uri })\n          .then(rep => {\n            if (rep.status === 200) {\n              if (rep.data.status === \"success\") {\n                return this.axios.put(rep.data.data, this.form.file, {\n                  headers: {\n                    \"Content-Type\": this.form.file.type\n                  }\n                });\n              } else throw new Error(rep.data.info);\n            } else throw new Error(rep.status + rep.statusText);\n          })\n          .then(this.modify)\n          .catch(err => {\n            this.$$Message.error(err.message);\n          });\n      } else {\n        try {\n          this.modify({ status: 200 });\n        } catch (err) {\n          this.$Message.error(err.message);\n        }\n      }\n    },\n    modify: function(rep) {\n      if (rep.status === 200) {\n        this.axios\n          .post(\"/function/create\", {\n            name: this.form.functionName,\n            uri: this.form.functionURI,\n            memory_limit: this.form.memoryLimit,\n            max_idle_time: this.form.maxIdleTime,\n            environment: this.form.environment,\n            entrypoint: this.form.entrypoint,\n            code_url: this.form.code_url\n          })\n          .then(rep => {\n            if (rep.status === 200) {\n              if (rep.data.status === \"success\") {\n                this.$Message.success(\"创建成功\");\n                this.$router.push(\"/center/function\");\n              } else throw new Error(rep.data.info);\n            } else throw new Error(rep.status + rep.statusText);\n          });\n      } else throw new Error(rep.status + rep.statusText);\n    },\n    updatePreview() {\n      try {\n        let svg = d3.select(\"#workflow-preview\");\n        let inner = svg.select(\"g\");\n        let vis = new WorkflowVis(svg, inner);\n        let workflow = new Workflow(JSON.parse(this.form.definition));\n        let dag = workflow.toDAG();\n        vis.clear();\n        vis.setNodes(dag.nodes);\n        vis.setEdges(dag.edges);\n        vis.setStartNodes(dag.startNodes);\n        vis.setEndNodes(dag.endNodes);\n        vis.setParents(dag.parents);\n        vis.redraw();\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    copyToClipboard(uri) {\n      console.log(uri);\n      let node = document.querySelector(\"#dummy-uri\");\n      node.value = uri;\n      node.select();\n      document.execCommand(\"copy\");\n    },\n    testInitialize() {\n      let svg = d3.select(\"#workflow-test\");\n      let inner = svg.select(\"g\");\n      let vis = new WorkflowVis(svg, inner);\n      let workflow = new Workflow(JSON.parse(this.workflowInfo.definition));\n      let dag = workflow.toDAG();\n      vis.clear();\n      vis.setNodes(dag.nodes);\n      vis.setEdges(dag.edges);\n      vis.setStartNodes(dag.startNodes);\n      vis.setEndNodes(dag.endNodes);\n      vis.setParents(dag.parents);\n      vis.redraw(true);\n      this.workflowUpdater = new WorkflowUpdater(vis, workflow);\n    }\n  }\n};\n</script>\n\n<style>\n.info-line {\n  line-height: 40px;\n  font-size: 1.1em;\n}\n\n.node rect,\n.node circle,\n.node ellipse {\n  stroke: #333;\n  fill: #fff;\n  stroke-width: 1px;\n}\n\n.edgePath path {\n  stroke: #333;\n  fill: #333;\n  stroke-width: 1.5px;\n}\n\n.cluster rect {\n  stroke: #333;\n  fill: #fff;\n  stroke-dasharray: 5;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorkflowView.vue?vue&type=template&id=51cbe1ac&\"\nimport script from \"./WorkflowView.vue?vue&type=script&lang=js&\"\nexport * from \"./WorkflowView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorkflowView.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <Layout style=\"min-height: calc(100vh - 128px); width: 80%; margin: 0 auto;\">\n    <Header style=\"background: #f8f8f9; padding: 0;\">\n      <Button\n        shape=\"circle\"\n        size=\"large\"\n        type=\"primary\"\n        @click=\"$router.push('/center/workflow/create')\"\n      >\n        创建新工作流 </Button\n      >&nbsp;\n      <Button\n        icon=\"md-refresh\"\n        shape=\"circle\"\n        size=\"large\"\n        type=\"default\"\n        @click=\"refreshWorkflows(() => selectWorkflow(selected_idx))\"\n      />\n    </Header>\n    <Layout style=\"height: 100%; background: #fff; padding: 16px;\">\n      <Row style=\"height: 100%;\">\n        <Col :xs=\"8\" :sm=\"8\" :md=\"6\" :lg=\"4\" style=\"height: 100%;\">\n          <Layout style=\"height: 100%; overflow-y: auto; background: #fff;\">\n            <h2>工作流列表</h2>\n            <br />\n            <ul>\n              <li\n                class=\"workflow-wrapper\"\n                v-for=\"(w, idx) in workflows\"\n                :key=\"idx\"\n                :id=\"'workflow' + idx\"\n                @click.prevent.stop=\"selectWorkflow(idx)\"\n              >\n                <div class=\"workflow-name\">\n                  <Badge status=\"default\" />\n                  {{ w.name }}\n                </div>\n              </li>\n            </ul>\n          </Layout>\n        </Col>\n        <Col\n          :xs=\"16\"\n          :sm=\"16\"\n          :md=\"18\"\n          :lg=\"20\"\n          style=\"height: 100%; padding-left: 16px;\"\n        >\n          <!-- <Layout>\n            <WorkflowView\n              v-for=\"(workflow, index) in current_workflow\"\n              :key=\"index\"\n              :workflowInfo=\"workflow\"\n            />\n          </Layout> -->\n          <Layout v-if=\"current_workflow\">\n            <WorkflowView\n              :workflowInfo=\"current_workflow\"\n              :key=\"selected_idx\"\n            />\n          </Layout>\n        </Col>\n      </Row>\n    </Layout>\n  </Layout>\n</template>\n\n<script>\nimport WorkflowView from \"@/components/WorkflowView\";\nexport default {\n  name: \"WorkflowManage\",\n  components: { WorkflowView },\n  data: () => {\n    return {\n      workflows: [],\n      current_workflow: null,\n      selected_idx: 0\n    };\n  },\n  mounted: function() {\n    this.refreshWorkflows(() => {\n      this.selectWorkflow(this.selected_idx);\n    });\n  },\n  methods: {\n    refreshWorkflows: function(callback) {\n      this.axios\n        .get(\"/workflow\")\n        .then(rep => {\n          if (rep.status === 200) {\n            if (rep.data.status === \"success\") {\n              this.workflows = rep.data.data;\n              if (callback !== undefined) this.$nextTick(callback);\n            } else throw new Error(rep.data.info);\n          } else throw new Error(rep.status + rep.statusText);\n        })\n        .catch(err => {\n          console.error(err);\n        });\n    },\n    selectWorkflow: function(idx) {\n      if (idx < 0 || idx >= this.workflows.length) {\n        return;\n      }\n      if (this.selected_idx !== null)\n        document\n          .querySelector(\"#workflow\" + this.selected_idx)\n          .classList.remove(\"selected\");\n      document.querySelector(\"#workflow\" + idx).classList.add(\"selected\");\n      this.selected_idx = idx;\n      // this.current_workflow = null;\n      this.current_workflow = this.workflows[idx];\n    }\n  }\n};\n</script>\n\n<style>\n.workflow-wrapper {\n  width: 100%;\n  height: 32px;\n  padding-left: 8px;\n  list-style-type: none;\n  cursor: pointer;\n}\n\n.workflow-wrapper:hover {\n  background: #f8f8f9;\n}\n\n.workflow-wrapper.selected {\n  background: #dcdee2;\n}\n\n.workflow-name {\n  display: table-cell;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  font-size: 1.1em;\n  line-height: 32px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorkflowManage.vue?vue&type=template&id=49e16dee&\"\nimport script from \"./WorkflowManage.vue?vue&type=script&lang=js&\"\nexport * from \"./WorkflowManage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorkflowManage.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowView.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowView.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowManage.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowManage.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}